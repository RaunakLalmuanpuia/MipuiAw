import{Q as ee}from"./QSpace-4c640a0c.js";import{g as q,q as le,r as h,Y as te,$ as ie,A as _,aY as oe,B as ae,cY as ne,T as H,aq as se,o as x,c as k,b as s,a as e,u as c,h as o,i as j,F as re,Z as ue,t as D,Q as b,j as W,e as Y,k as R,l as E,m as L,n as V,p as I,w as Z,N as de,O as ce,C as Q}from"./app-bfca7ec4.js";import{Q as M}from"./QTd-bd214e85.js";import{Q as G}from"./QChip-fbdc1a57.js";import{Q as me}from"./QTable-e2e2fc3c.js";import{Q as J}from"./QFile-c0aa8cfa.js";import{Q as K}from"./QSelect-0be4b91d.js";import{u as ge}from"./use-quasar-8ef4c359.js";import{u as fe}from"./vue-router-9d2630ad.js";import"./use-fullscreen-0d7e226b.js";import"./QMenu-7802b655.js";const ve={ratio:[String,Number]};function be(l,m){return q(()=>{const g=Number(l.ratio||(m!==void 0?m.value:void 0));return isNaN(g)!==!0&&g>0?{paddingBottom:`${100/g}%`}:null})}const he=16/9,O=le({name:"QImg",props:{...ve,src:String,srcset:String,sizes:String,alt:String,crossorigin:String,decoding:String,referrerpolicy:String,draggable:Boolean,loading:{type:String,default:"lazy"},fetchpriority:{type:String,default:"auto"},width:String,height:String,initialRatio:{type:[Number,String],default:he},placeholderSrc:String,fit:{type:String,default:"cover"},position:{type:String,default:"50% 50%"},imgClass:String,imgStyle:Object,noSpinner:Boolean,noNativeMenu:Boolean,noTransition:Boolean,spinnerColor:String,spinnerSize:String},emits:["load","error"],setup(l,{slots:m,emit:g}){const d=h(l.initialRatio),y=be(l,d);let u=null,v=!1;const f=[h(null),h(C())],i=h(0),p=h(!1),w=h(!1),$=q(()=>`q-img q-img--${l.noNativeMenu===!0?"no-":""}menu`),F=q(()=>({width:l.width,height:l.height})),z=q(()=>`q-img__image ${l.imgClass!==void 0?l.imgClass+" ":""}q-img__image--with${l.noTransition===!0?"out":""}-transition`),A=q(()=>({...l.imgStyle,objectFit:l.fit,objectPosition:l.position}));te(()=>B(),T);function B(){return l.src||l.srcset||l.sizes?{src:l.src,srcset:l.srcset,sizes:l.sizes}:null}function C(){return l.placeholderSrc!==void 0?{src:l.placeholderSrc}:null}function T(a){u!==null&&(clearTimeout(u),u=null),w.value=!1,a===null?(p.value=!1,f[i.value^1].value=C()):p.value=!0,f[i.value].value=a}function P({target:a}){v!==!0&&(u!==null&&(clearTimeout(u),u=null),d.value=a.naturalHeight===0?.5:a.naturalWidth/a.naturalHeight,r(a,1))}function r(a,N){v===!0||N===1e3||(a.complete===!0?n(a):u=setTimeout(()=>{u=null,r(a,N+1)},50))}function n(a){v!==!0&&(i.value=i.value^1,f[i.value].value=null,p.value=!1,w.value=!1,g("load",a.currentSrc||a.src))}function t(a){u!==null&&(clearTimeout(u),u=null),p.value=!1,w.value=!0,f[i.value].value=null,f[i.value^1].value=C(),g("error",a)}function S(a){const N=f[a].value,U={key:"img_"+a,class:z.value,style:A.value,crossorigin:l.crossorigin,decoding:l.decoding,referrerpolicy:l.referrerpolicy,height:l.height,width:l.width,loading:l.loading,fetchpriority:l.fetchpriority,"aria-hidden":"true",draggable:l.draggable,...N};return i.value===a?(U.class+=" q-img__image--waiting",Object.assign(U,{onLoad:P,onError:t})):U.class+=" q-img__image--loaded",_("div",{class:"q-img__container absolute-full",key:"img"+a},_("img",U))}function X(){return p.value!==!0?_("div",{key:"content",class:"q-img__content absolute-full q-anchor--skip"},ae(m[w.value===!0?"error":"default"])):_("div",{key:"loading",class:"q-img__loading absolute-full flex flex-center"},m.loading!==void 0?m.loading():l.noSpinner===!0?void 0:[_(ne,{color:l.spinnerColor,size:l.spinnerSize})])}return T(B()),ie(()=>{v=!0,u!==null&&(clearTimeout(u),u=null)}),()=>{const a=[];return y.value!==null&&a.push(_("div",{key:"filler",style:y.value})),w.value!==!0&&(f[0].value!==null&&a.push(S(0)),f[1].value!==null&&a.push(S(1))),a.push(_(oe,{name:"q-transition--fade"},X)),_("div",{class:$.value,style:F.value,role:"img","aria-label":l.alt},a)}}}),ye={class:"m-3"},pe={class:"q-pa-md"},_e=s("span",{class:"text-h4"},"Carousel List",-1),we={class:"text-h4"},Ce={key:0},Se={key:1},xe=["onClick"],ke=s("div",null," Note: Desire ratio for the carousel image is 19:6, with maximum 2MB ",-1),Ve=s("span",{class:"text-weight-bold"},"My Image",-1),Qe=s("span",{class:"text-weight-bold"},"Add Carousel",-1),qe=["onSubmit"],Be={class:"q-pa-md"},Te={class:"q-gutter-x-md column",style:{width:"400px"}},Ne={class:"mb-3"},Ue=["textContent"],je={class:"mb-3"},De=s("span",{class:"text-weight-bold"},"Edit Carousel",-1),Re={class:"q-pa-md"},Ie={class:"q-gutter-x-md column",style:{width:"400px"}},Me={class:"mb-3"},$e=["textContent"],Fe={class:"mb-3"},ze=s("span",{class:"q-ml-sm"},"Are you sure you want to Delete?",-1),Ke={__name:"Index",props:{carousels:"",errors:Object,imageCount:""},setup(l){const m=l,g=[{label:"Yes",value:1},{label:"No",value:0}],d=ge(),y=h(!1),u=h(!1),v=h(!1),f=h(!1),i=H({id:"",visible:g[0],image:""});se(()=>{m.errors.maximum&&(y.value=!1,v.value=!1,d.notify({message:m.errors.maximum,icon:"warning",actions:[{icon:"close",color:"white",round:!0,handler:()=>{}}]}))}),fe();let p="";const w=[{name:"id",align:"left",label:"ID",field:"id",headerClasses:""},{name:"name",align:"left",label:"Label",field:"name"},{name:"visible",align:"left",label:"Visible",field:"id"},{name:"preview",align:"left",label:"Preview",field:"id"},{name:"actions",align:"left",label:"Action",field:"id"}],$=()=>{y.value=!0},F=r=>{i.post(route("admin.system.carousel.store"),{onStart:()=>d.loading.show({message:"Uploading..."}),onFinish:()=>{d.loading.hide()},onSuccess:()=>{y.value=!1,d.notify({message:"Carousel Created",closeBtn:!0,icon:"check",iconColor:"blue"}),d.loading.hide()}})},z=r=>{v.value=!0,i.id=r.id,i.image=r.image,i.visible=r.visible==1?g[0]:g[1]},A=H({}),B=r=>{f.value=!0,i.id=r.id},C=r=>{A.transform(n=>({})).delete(route("admin.system.carousel.delete",r),{onStart:()=>d.loading.show({message:"Deleting..."}),onFinish:()=>{d.loading.hide()},onSuccess:()=>{d.notify({message:"Delete Successfully",closeBtn:!0,icon:"check",iconColor:"blue"}),d.loading.hide()}})},T=r=>{i.post(route("admin.system.carousel.update",r),{onStart:()=>d.loading.show({message:"Uploading..."}),onFinish:()=>{d.loading.hide()},onSuccess:()=>{y.value=!1,v.value=!1,d.notify({message:"Carousel Updated",closeBtn:!0,icon:"check",iconColor:"blue"}),d.loading.hide()}})},P=r=>{console.log(r),u.value=!0,p=r};return(r,n)=>(x(),k(re,null,[s("div",ye,[e(c(ue),{title:"Carousel"}),s("div",pe,[e(me,{rows:l.carousels,columns:w,"row-key":"name",flat:"",bordered:"",separator:"cell",pagination:{sortBy:"id",rowsPerPage:10}},{top:o(()=>[_e,s("div",we,"( "+D(m.imageCount)+" image visible. Maximum 10)",1),e(ee),e(b,{modelValue:r.xxx,"onUpdate:modelValue":n[0]||(n[0]=t=>r.xxx=t),label:"add",icon:"add",color:"primary",onClick:$},null,8,["modelValue"])]),"body-cell-id":o(t=>[e(M,{key:"id",props:t},{default:o(()=>[W(D(t.rowIndex+1),1)]),_:2},1032,["props"])]),"body-cell-visible":o(t=>[e(M,null,{default:o(()=>[t.row.visible==0?(x(),k("div",Ce,[e(G,{color:"red","text-color":"white",label:"No"})])):t.row.visible==1?(x(),k("div",Se,[e(G,{color:"green","text-color":"white",label:"Yes"})])):Y("",!0)]),_:2},1024)]),"body-cell-preview":o(t=>[e(M,{props:t},{default:o(()=>[s("div",{onClick:S=>P(t.row.image)},[e(O,{src:"../../../../../../../../storage/carousel/"+t.row.image,ratio:16/9,width:"100px"},null,8,["src"])],8,xe)]),_:2},1032,["props"])]),"body-cell-actions":o(t=>[e(M,{key:"action",props:t},{default:o(()=>[e(b,{dense:"",round:"",flat:"",color:"green",onClick:S=>z(t.row),icon:"edit"},null,8,["onClick"]),e(b,{dense:"",round:"",flat:"",color:"red",onClick:S=>B(t.row),icon:"delete"},null,8,["onClick"])]),_:2},1032,["props"])]),_:1},8,["rows"]),ke])]),e(j,{modelValue:u.value,"onUpdate:modelValue":n[1]||(n[1]=t=>u.value=t)},{default:o(()=>[e(R,{style:{width:"700px","max-width":"80vw"}},{default:o(()=>[e(E,null,{default:o(()=>[e(L,null,{default:o(()=>[Ve]),_:1}),V(e(b,{flat:"",round:"",dense:"",icon:"close"},null,512),[[Q]])]),_:1}),e(I,null,{default:o(()=>[e(O,{fit:"contain",src:"../../../../../../../../storage/carousel/"+c(p)},null,8,["src"])]),_:1})]),_:1})]),_:1},8,["modelValue"]),e(j,{modelValue:y.value,"onUpdate:modelValue":n[4]||(n[4]=t=>y.value=t),persistent:""},{default:o(()=>[e(R,null,{default:o(()=>[e(E,null,{default:o(()=>[e(L,null,{default:o(()=>[Qe]),_:1}),V(e(b,{flat:"",round:"",dense:"",icon:"close"},null,512),[[Q]])]),_:1}),e(I,null,{default:o(()=>[s("form",{onSubmit:Z(F,["prevent"]),method:"post"},[s("div",Be,[s("div",Te,[s("div",Ne,[e(J,{style:{"max-width":"300px"},modelValue:c(i).image,"onUpdate:modelValue":n[2]||(n[2]=t=>c(i).image=t),filled:"",label:"Click to select image",accept:".jpg,.jpeg,.png",onRejected:r.onRejected},null,8,["modelValue","onRejected"]),m.errors.image?(x(),k("div",{key:0,textContent:D(m.errors.image),class:"text-red-500 text-xs mt-3"},null,8,Ue)):Y("",!0)]),s("div",je,[e(K,{modelValue:c(i).visible,"onUpdate:modelValue":n[3]||(n[3]=t=>c(i).visible=t),"input-debounce":"0",label:"Visibility for carousel",options:g,style:{width:"250px"}},null,8,["modelValue"])]),e(b,{label:"Submit",dense:"",color:"black",type:"submit",disable:c(i).processing},null,8,["disable"])])])],40,qe)]),_:1})]),_:1})]),_:1},8,["modelValue"]),e(j,{modelValue:v.value,"onUpdate:modelValue":n[8]||(n[8]=t=>v.value=t),persistent:""},{default:o(()=>[e(R,null,{default:o(()=>[e(E,null,{default:o(()=>[e(L,null,{default:o(()=>[De]),_:1}),V(e(b,{flat:"",round:"",dense:"",icon:"close"},null,512),[[Q]])]),_:1}),e(I,null,{default:o(()=>[s("form",{onSubmit:n[7]||(n[7]=Z(t=>T(c(i).id),["prevent"])),method:"post"},[s("div",Re,[s("div",Ie,[s("div",Me,[e(J,{style:{"max-width":"300px"},modelValue:c(i).image,"onUpdate:modelValue":n[5]||(n[5]=t=>c(i).image=t),filled:"",label:"Click to update image",accept:".jpg, image/*"},null,8,["modelValue"]),m.errors.image?(x(),k("div",{key:0,textContent:D(m.errors.image),class:"text-red-500 text-xs mt-3"},null,8,$e)):Y("",!0)]),s("div",null,[W("Current Image: "),e(O,{src:"../../../../../../../../storage/carousel/"+c(i).image,ratio:16/9,width:"80px"},null,8,["src"])]),s("div",Fe,[e(K,{modelValue:c(i).visible,"onUpdate:modelValue":n[6]||(n[6]=t=>c(i).visible=t),"input-debounce":"0",label:"Visibility for carousel",options:g,style:{width:"250px"}},null,8,["modelValue"])]),e(b,{label:"Update",dense:"",color:"black",type:"submit",disable:c(i).processing},null,8,["disable"])])])],32)]),_:1})]),_:1})]),_:1},8,["modelValue"]),e(j,{modelValue:f.value,"onUpdate:modelValue":n[10]||(n[10]=t=>f.value=t)},{default:o(()=>[e(R,null,{default:o(()=>[e(I,{class:"row items-center"},{default:o(()=>[e(de,{icon:"done",color:"primary","text-color":"white"}),ze]),_:1}),e(ce,{align:"right"},{default:o(()=>[V(e(b,{flat:"",label:"Cancel",color:"primary"},null,512),[[Q]]),V(e(b,{flat:"",label:"Yes",onClick:n[9]||(n[9]=t=>C(c(i).id)),color:"primary"},null,512),[[Q]])]),_:1})]),_:1})]),_:1},8,["modelValue"])],64))}};export{Ke as default};

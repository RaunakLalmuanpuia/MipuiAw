import{Q as P}from"./QSpace-4c640a0c.js";import{r as u,T as x,J as F,o as i,c as d,a as l,u as s,b as o,t as r,h as a,i as S,F as R,Z as Y,j as v,d as g,L as $,Q as m,w,M as E,e as j,k as O,l as z,m as J,n as y,p as k,N as Z,O as G,P as H,C,R as T}from"./app-bfca7ec4.js";import{Q as p}from"./QTd-bd214e85.js";import{Q as K}from"./QTable-e2e2fc3c.js";import{d as W}from"./date-37bbfee8.js";import{u as X}from"./use-quasar-8ef4c359.js";import"./QSelect-0be4b91d.js";import"./QChip-fbdc1a57.js";import"./QMenu-7802b655.js";import"./use-fullscreen-0d7e226b.js";const ee={class:"container"},le=o("h4",{class:"mt-5 mb-5 ml-5"},"State Nodal Officers/Department Nodal officer",-1),te={class:"q-pa-md"},ae=o("span",{class:"text-2xl"},"Department Nodal Officer List",-1),oe={key:0},ne={key:1},se={key:2},ie={key:3},de={key:0},re={key:1},me=o("span",{class:"text-weight-bold"},"Edit State Nodal Officer",-1),ce=["onSubmit"],ue={class:"q-pa-md"},fe={class:"q-gutter-x-md column",style:{width:"400px"}},pe=o("span",{class:"q-ml-sm"},"Type the below text to delete?",-1),Ne={__name:"Index",props:{stateNodalOfficers:Object,role:""},setup(q){const f=X(),V=u(!1),_=u(""),c=x({name:""}),N="Delete"+Math.floor(Math.random()*(111-999+1))+111;u(!1);const h=u(!1);let b=x({text:""});const Q=u(""),A=[{name:"id",align:"left",label:"Sl No",field:"id",headerClasses:""},{name:"department",align:"left",label:"Department Nodal Officer",field:t=>t.department?t.name+`
`+t.department.organization_name:t.name,style:t=>t.active==1?"white-space:pre-line;":"color:red; white-space:pre-line;"},{name:"contact_details",align:"left",label:"Contact Details",field:t=>"Email: "+t.email+`
Ph: `+t.mobile,style:t=>t.active==1?"white-space:pre-line;":"color:red; white-space:pre-line;"},{name:"active",align:"left",label:"Active",field:t=>t.active==1?"Active":"Inactive",style:t=>t.active==1?"white-space:pre-line;color:green;":"color:red; white-space:pre-line;"},{name:"last_active",align:"left",label:"Last Active",field:"last_login",format:t=>W.formatDate(t,"DD MMM YYYY, hh:mm A")??"-"},{name:"more",align:"left",label:"Sub Org",field:"id"},{name:"actions",align:"left",label:"Action",field:"id"}],B=t=>{T.get("nodalindex/sibling/"+t.department_id)},L=t=>{console.log("Im the only one: "+t)},M=t=>{h.value=!0,Q.value=t},U=()=>{T.delete(route("nodal.destroy",Q.value),{onStart:()=>f.loading.show({message:"Deleting...."}),onSuccess:()=>{f.notify({message:"User deleted",closeBtn:!0}),f.loading.hide()},onFinish:()=>f.loading.hide(),preserveState:!1})};return(t,n)=>{const I=F("Link");return i(),d(R,null,[l(s(Y),{title:"State Nodal List"}),o("div",ee,[le,o("h3",null,r(t.departmentName),1),l(I,{href:"/admin/nodal/create",class:"p-2 m-5 bg-blue-5 text-white shadow-2"},{default:a(()=>[v("New Department Nodal")]),_:1}),o("div",te,[l(K,{rows:q.stateNodalOfficers,columns:A,filter:_.value,"row-key":"name",onRequest:t.tableData,flat:"",bordered:"",title:"List",separator:"cell",pagination:{sortBy:"name",rowsPerPage:10},"records-per-page-options":"[1,5,10]"},{top:a(()=>[ae,l(P),l(g,{dense:"",debounce:"300",color:"primary",modelValue:_.value,"onUpdate:modelValue":n[0]||(n[0]=e=>_.value=e),placeholder:"Search"},{append:a(()=>[l($,{name:"search"})]),_:1},8,["modelValue"])]),"body-cell-id":a(e=>[l(p,{key:"id",props:e},{default:a(()=>[v(r(e.rowIndex+1),1)]),_:2},1032,["props"])]),"body-cell-roles":a(e=>[l(p,{props:e},{default:a(()=>[e.row.role_id==3?(i(),d("div",oe,r(e.row.role.name),1)):e.row.role_id==4?(i(),d("div",ne,r(e.row.role.name),1)):e.row.role_id==6?(i(),d("div",se,r(e.row.role.name),1)):(i(),d("div",ie,r(e.row.role.name),1))]),_:2},1032,["props"])]),"body-cell-more":a(e=>[l(p,{props:e},{default:a(()=>[e.row.role_id==2?(i(),d("div",de," - none - ")):(i(),d("div",re,[l(m,{unelevated:"",onClick:D=>B(e.row),rounded:"",color:"blue-4",size:"sm",label:"Click to go to sub"},null,8,["onClick"])]))]),_:2},1032,["props"])]),"body-cell-actions":a(e=>[l(p,{key:"action",props:e},{default:a(()=>[l(m,{dense:"",round:"",flat:"",color:"green",onClick:w(D=>t.$inertia.get("/admin/nodal/"+e.row.id+"/edit"),["stop"]),icon:"edit"},null,8,["onClick"]),e.row.role_id!=2?(i(),E(m,{key:0,dense:"",round:"",flat:"",color:"red",onClick:w(D=>M(e.row.id),["stop"]),icon:"delete"},null,8,["onClick"])):j("",!0)]),_:2},1032,["props"])]),_:1},8,["rows","filter","onRequest"]),l(S,{modelValue:V.value,"onUpdate:modelValue":n[2]||(n[2]=e=>V.value=e)},{default:a(()=>[l(O,null,{default:a(()=>[l(z,null,{default:a(()=>[l(J,null,{default:a(()=>[me]),_:1}),y(l(m,{flat:"",round:"",dense:"",icon:"close"},null,512),[[C]])]),_:1}),l(k,null,{default:a(()=>[o("form",{onSubmit:w(L,["prevent"]),method:"post"},[o("div",ue,[o("div",fe,[l(g,{name:"name",standout:"",modelValue:s(c).name,"onUpdate:modelValue":n[1]||(n[1]=e=>s(c).name=e),error:!!s(c).errors.name,"error-message":s(c).errors.name,dense:t.dense,placeholder:"Department Name"},null,8,["modelValue","error","error-message","dense"]),l(m,{label:"Update",dense:"",color:"black",type:"submit",disable:s(c).processing},null,8,["disable"])])])],40,ce)]),_:1})]),_:1})]),_:1},8,["modelValue"])])]),l(S,{modelValue:h.value,"onUpdate:modelValue":n[4]||(n[4]=e=>h.value=e)},{default:a(()=>[l(O,null,{default:a(()=>[l(k,{class:"row items-center"},{default:a(()=>[l(Z,{icon:"delete",color:"red","text-color":"white"}),pe]),_:1}),l(k,null,{default:a(()=>[o("div",null,[v(" Type: "),o("b",null,r(N))]),o("div",null,[l(g,{modelValue:s(b).text,"onUpdate:modelValue":n[3]||(n[3]=e=>s(b).text=e),dense:""},null,8,["modelValue"])])]),_:1}),l(G,{align:"right"},{default:a(()=>[y(l(m,{flat:"",label:"Cancel",color:"primary"},null,512),[[C]]),y(l(m,{flat:"",label:"Delete",onClick:U,color:"primary"},null,512),[[H,s(b).text===N],[C]])]),_:1})]),_:1})]),_:1},8,["modelValue"])],64)}}};export{Ne as default};

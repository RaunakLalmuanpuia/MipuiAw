import{K as T,g as D,r as k,T as q,o,c as i,a as s,u,b as t,n as U,P as z,j as h,t as l,S as m,h as a,k as v,F as V,R as C,Z as P,p as g,d as E,L as G,Q as I,e as N}from"./app-bfca7ec4.js";import{Q as A}from"./QSpace-4c640a0c.js";import{Q as Y}from"./QTooltip-947db973.js";import{Q as c}from"./QTd-bd214e85.js";import{Q as B}from"./QTable-e2e2fc3c.js";import{u as O}from"./use-quasar-8ef4c359.js";import{d as $}from"./date-37bbfee8.js";import"./QMenu-7802b655.js";import"./QSelect-0be4b91d.js";import"./QChip-fbdc1a57.js";import"./use-fullscreen-0d7e226b.js";const H={class:"container"},L={class:"m-4"},M=t("p",{class:"text-h4 pt-3 bg-red-2 text-red-6 p-3 text-weight-medium"}," YOUR ACCOUNT IS INACTIVE! ",-1),F=[M],j=t("h3",null,"Dashboard",-1),K={class:"q-pa-md example-row-equal-width"},Z={class:"row"},J={class:"text-center"},W={class:"text-h2"},X=t("hr",null,null,-1),ee=t("div",{class:"text-bold"}," Total Grievance Registered ",-1),te={class:"text-center"},ae={class:"text-h2"},se=t("hr",null,null,-1),oe=t("div",{class:"text-bold"}," Number of Grievances Pending ",-1),ie={class:"text-center"},ne={class:"text-h2"},de=t("hr",null,null,-1),le=t("div",{class:"text-bold"}," Number of Grievances Closed ",-1),re={class:"q-pa-md"},ce=t("span",{class:"text-2xl"},"Grievance List",-1),_e={style:{width:"200px"}},ue={style:{width:"140px"}},pe={style:{width:"170px"},class:"text-center"},he={key:0},me={key:0},ve=t("div",{class:"text-red"},[t("i",{class:"q-icon material-icons"}," notifications ")],-1),ge=[ve],be={key:1},fe={key:2},we={key:3},ye={key:4},xe={key:5},De={key:6},ke={key:7},Ce={key:8},Ne={style:{width:"150px"}},Ae={__name:"Dashboard",props:["grievances","dashboardData","search"],setup(b){var x;const d=b,f=T(),w=D(()=>f.props.CURRENT_USER),_=k(d.search);O(),D(()=>f.props.flash),q({});const Q=n=>{C.get("/grievance/citizen/show/"+n)},S=[{name:"id",align:"left",label:"Sl No",field:"id"},{name:"organization",align:"left",label:"Department Name",field:"department"},{name:"registration_number",align:"left",label:"Registration No",field:"registration_number"},{name:"grievance_description",align:"left",label:"Description",field:"grievance_description"},{name:"more",align:"left",label:"Details",field:"id"},{name:"status",align:"center",label:"Status",field:"status"},{name:"date_of_receipt",align:"left",label:"Submit Date",field:"created_at"}],p=k({page:((x=d.grievances)==null?void 0:x.current_page)||0,rowsPerPage:d.grievances.per_page,rowsNumber:d.grievances.total});function R(n){_.value=n,y({pagination:p})}function y(n){const{page:r,rowsPerPage:e}=n.pagination;C.get(route("citizen.dashboard"),{per_page:e,page:r,search:_.value},{})}return(n,r)=>(o(),i(V,null,[s(u(P),{title:"Dashboard"}),t("div",H,[t("div",L,[U(t("div",null,F,512),[[z,u(w).active==0]]),j,h(" "+l(n.dashboadData)+" ",1),t("div",K,[t("div",Z,[t("div",{class:m(["p-5",n.$q.screen.xs?"col-12":"col"])},[s(v,{class:"mHoverable my-card bg-amber-9 text-white"},{default:a(()=>[s(g,null,{default:a(()=>[t("div",J,[t("div",W,l(d.dashboardData.total_grievance_received??"nil"),1),X,ee])]),_:1})]),_:1})],2),t("div",{class:m(["p-5",n.$q.screen.xs?"col-12":"col"])},[s(v,{class:"mHoverable my-card bg-green-9 text-white"},{default:a(()=>[s(g,null,{default:a(()=>[t("div",te,[t("div",ae,l(d.dashboardData.total_grievance_pending??"nil"),1),se,oe])]),_:1})]),_:1})],2),t("div",{class:m(["p-5",n.$q.screen.xs?"col-12":"col"])},[s(v,{class:"mHoverable my-card bg-cyan-9 text-white"},{default:a(()=>[s(g,null,{default:a(()=>[t("div",ie,[t("div",ne,l(d.dashboardData.total_grievance_closed??"nil"),1),de,le])]),_:1})]),_:1})],2)])])]),t("div",re,[s(B,{pagination:p.value,"onUpdate:pagination":r[1]||(r[1]=e=>p.value=e),rows:b.grievances.data,columns:S,props:d,"row-key":"name","table-header-class":"bg-grey-2",flat:"",bordered:"",title:"Grievance List",separator:"cell","wrap-cells":"",onRequest:y},{top:a(()=>[ce,s(A),s(E,{autofocus:"",dense:"",debounce:"800","onUpdate:modelValue":[R,r[0]||(r[0]=e=>_.value=e)],color:"primary",modelValue:_.value,placeholder:"Search"},{append:a(()=>[s(G,{name:"search"})]),default:a(()=>[s(Y,null,{default:a(()=>[h(" Search using Registration Number, Department and Description. ")]),_:1})]),_:1},8,["modelValue"])]),"body-cell-id":a(e=>[s(c,{key:"id",props:e},{default:a(()=>[h(l(e.rowIndex+1),1)]),_:2},1032,["props"])]),"body-cell-organization":a(e=>[s(c,{props:e},{default:a(()=>[t("div",_e,l(e.row.department.organization_name),1)]),_:2},1032,["props"])]),"body-cell-grievance_description":a(e=>[s(c,{class:"",props:e},{default:a(()=>[t("div",ue,l(e.row.grievance_text),1)]),_:2},1032,["props"])]),"body-cell-more":a(e=>[s(c,{key:"more",props:e},{default:a(()=>[s(I,{dense:"",round:"",flat:"",color:"blue",onClick:Qe=>Q(e.row.id),icon:"more"},null,8,["onClick"])]),_:2},1032,["props"])]),"body-cell-status":a(e=>[s(c,{key:"status",props:e},{default:a(()=>[t("div",pe,[u(w).role_id==5?(o(),i("div",he,[e.row.is_seen_by_citizen?N("",!0):(o(),i("div",me,ge))])):N("",!0),e.row.action_id===1?(o(),i("div",be," - No Action Required - ")):e.row.action_id===2?(o(),i("div",fe," - Grievance under examination - ")):e.row.action_id===3?(o(),i("div",we," - Take up with Subordinate Organization - ")):e.row.action_id===4?(o(),i("div",ye," - Case Disposed - ")):e.row.action_id===5?(o(),i("div",xe," - Transferred - ")):e.row.action_id===6?(o(),i("div",De," - Appeal - ")):e.row.action_id===7?(o(),i("div",ke," - Closed - ")):(o(),i("div",Ce," - Under Process - "))])]),_:2},1032,["props"])]),"body-cell-date_of_receipt":a(e=>[s(c,{props:e},{default:a(()=>[t("div",Ne,l(u($).formatDate(e.row.created_at,"DD MMM YYYY, hh:mm A")),1)]),_:2},1032,["props"])]),_:1},8,["pagination","rows","props"])])])],64))}};export{Ae as default};

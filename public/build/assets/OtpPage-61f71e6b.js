import{r as l,K as T,g as w,T as N,z as V,J as F,o as m,c as p,a as o,u,b as e,t as r,e as k,h as v,S as B,j as g,d as I,n as Q,P as U,Q as q,F as M,Z as R,ax as O}from"./app-bfca7ec4.js";import{u as E}from"./use-quasar-8ef4c359.js";const $={key:0,class:"bg-red-2 border-red-9 mt-5 p-4 border-2"},z=e("div",{class:"text-red-9 text-h6 text-bold"}," WARNING! ",-1),D={class:"text-grey-9"},G={key:1,class:"bg-green-2 border-green-9 mt-5 p-4 border-2"},L=e("div",{class:"text-green-9 text-h6 text-bold"}," Success! ",-1),j={class:"text-grey-9"},A={class:"m-5"},J={class:"row mt-3"},K=e("i",{class:"q-icon material-icons-outlined"}," arrow_back ",-1),W={class:"border shadow"},Z={class:"row p-3 bg-grey-4 text-h5"},H={class:"p-5"},X=e("div",null," OTP Expires after 5 mins ",-1),se={__name:"OtpPage",props:["verification_id","new_mobile","error"],setup(S){const s=S,c=l(1),a=l(0);let h=l(!1);const n=E(),f=T();w(()=>f.props.flash.message);const b=w(()=>f.props.flash.message_success),_=l("");l("");let x=N({new_mobile:"",userOtp:"",verification_id:""});const y=()=>{x.transform(d=>({new_mobile:s.new_mobile,userOtp:_.value,verification_id:s.verification_id})).post("/verificationForMobileUpdate",{onStart:()=>n.loading.show({message:"Uploading..."}),onFinish:()=>{n.loading.hide()},onSuccess:()=>{}})},P=()=>{x.get("/resentOtpForMobileUpdate/"+s.verification_id,{onStart:()=>n.loading.show({message:"Uploading..."}),onFinish:()=>{n.loading.hide()},onSuccess:()=>{n.notify({message:"OTP Request Successfully",icon:"check",iconColor:"blue"})}})};return V(()=>{const d=setInterval(()=>{a.value===0?c.value===0?clearInterval(d):(c.value--,a.value=59):a.value--,a.value===0&&c.value===0&&(h=!0)},1e3)}),(d,t)=>{const C=F("Link");return m(),p(M,null,[o(u(R),{title:"OTP Page"}),s.error?(m(),p("div",$,[z,e("div",D,r(s.error),1)])):k("",!0),u(b)?(m(),p("div",G,[L,e("div",j,r(u(b)),1)])):k("",!0),e("div",A,[o(C,{class:"full-width border",onclick:"history.back();return false;"},{default:v(()=>[e("div",J,[o(O,{avatar:""},{default:v(()=>[K]),_:1}),o(O,null,{default:v(()=>[g(" Back ")]),_:1})])]),_:1}),e("div",W,[e("div",Z,[e("div",{class:B(d.$q.screen.xs?"col-12":"col-8")}," Enter OTP ",2)]),e("div",null,[e("div",H,[e("div",null," New Phone : "+r(s.new_mobile),1),e("div",null,[g(" OTP: "),o(I,{outlined:"",dense:"",modelValue:_.value,"onUpdate:modelValue":t[0]||(t[0]=i=>_.value=i),style:{width:"300px"},mask:"######",rules:[i=>i.length==6||"Must be 6 digits"],maxlength:"6"},null,8,["modelValue","rules"]),Q(e("div",{class:"cursor-pointer",onClick:t[1]||(t[1]=i=>P())}," Resent OTP ",512),[[U,u(h)]]),e("div",null," Resent after : "+r(c.value)+":"+r(a.value),1),X,o(q,{class:"mt-2 cursor-pointer",onClick:t[2]||(t[2]=i=>y())},{default:v(()=>[g(" Submit ")]),_:1})])])])])])],64)}}};export{se as default};

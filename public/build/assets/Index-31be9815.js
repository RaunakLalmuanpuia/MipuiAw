import{Q as c}from"./QTd-bd214e85.js";import{r as d,T as q,J as O,o as B,c as P,a as e,u as i,b as o,t as m,h as a,i as C,F as R,Z as F,j as p,S as I,Q as s,w as k,k as D,l as M,m as A,n as b,p as g,d as Q,N as E,O as L,P as $,C as h,R as j}from"./app-bfca7ec4.js";import{Q as z}from"./QTable-e2e2fc3c.js";import{u as J}from"./use-quasar-8ef4c359.js";import"./QSelect-0be4b91d.js";import"./QChip-fbdc1a57.js";import"./QMenu-7802b655.js";import"./use-fullscreen-0d7e226b.js";const Z={class:"m-5"},G=o("h4",null,"My Sub-Department User 👨‍💼👩‍💼",-1),H={class:"mb-3"},K={class:"q-pa-md"},W=o("span",{class:"text-weight-bold"},"Edit State Nodal Officer",-1),X=["onSubmit"],Y={class:"q-pa-md"},ee={class:"q-gutter-x-md column",style:{width:"400px"}},le=o("span",{class:"q-ml-sm"},"Type the below text to delete?",-1),me={__name:"Index",props:{departmentUsers:Object,departmentName:""},setup(_){const w=d(!1),r=J(),v="Delete"+Math.floor(Math.random()*(111-999+1))+111;d(!1);const u=d(!1);let f=q({text:""});const y=d(""),V=[{name:"id",align:"left",label:"Sl No",field:"id",headerClasses:""},{name:"name",align:"left",label:"Department Nodal Officer",field:"name"},{name:"mobile",align:"left",label:"Phone",field:"mobile"},{name:"email",align:"left",label:"Email",field:"email"},{name:"roles",align:"left",label:"Role",field:"role",format:t=>t.name},{name:"subDepartment",align:"left",label:"Office",field:"sub_department",format:t=>t.organization_name},{name:"actions",align:"left",label:"Action",field:"id"}],S=t=>{u.value=!0,y.value=t},N=()=>{j.delete(route("nodal.destroy",y.value),{onStart:()=>r.loading.show({message:"Deleting...."}),onSuccess:()=>{r.notify({message:"User deleted",closeBtn:!0}),r.loading.hide()},onFinish:()=>r.loading.hide(),preserveState:!1})},T=t=>{console.log("Im the only one: "+t)};return(t,n)=>{const x=O("Link");return B(),P(R,null,[e(i(F),{title:"SubDepartment Nodal list"}),o("div",Z,[G,o("h4",H,"Dept Name: "+m(_.departmentName),1),e(x,{href:"/admin/departmentnodal/create",class:"p-2 m-5 bg-blue-5 text-white shadow-2"},{default:a(()=>[p("New Sub-Department Officer")]),_:1}),o("div",K,[e(z,{rows:_.departmentUsers,columns:V,"row-key":"name",onRequest:t.tableData,flat:"",bordered:"",title:"List",separator:"cell",pagination:{sortBy:"name",rowsPerPage:10},"records-per-page-options":"[1,5,10]"},{"body-cell-id":a(l=>[e(c,{key:"id",props:l},{default:a(()=>[p(m(l.rowIndex+1),1)]),_:2},1032,["props"])]),"body-cell-name":a(l=>[e(c,{key:"id",props:l},{default:a(()=>[o("div",{class:I(l.row.active?"":"bg-red")},m(l.row.name),3)]),_:2},1032,["props"])]),"body-cell-actions":a(l=>[e(c,{key:"action",props:l},{default:a(()=>[e(s,{dense:"",round:"",flat:"",color:"green",onClick:U=>t.$inertia.get("/admin/subnodal/"+l.row.id+"/edit"),icon:"edit"},null,8,["onClick"]),e(s,{dense:"",round:"",flat:"",color:"red",onClick:k(U=>S(l.row.id),["stop"]),icon:"delete"},null,8,["onClick"])]),_:2},1032,["props"])]),_:1},8,["rows","onRequest"]),e(C,{modelValue:w.value,"onUpdate:modelValue":n[1]||(n[1]=l=>w.value=l)},{default:a(()=>[e(D,null,{default:a(()=>[e(M,null,{default:a(()=>[e(A,null,{default:a(()=>[W]),_:1}),b(e(s,{flat:"",round:"",dense:"",icon:"close"},null,512),[[h]])]),_:1}),e(g,null,{default:a(()=>[o("form",{onSubmit:k(T,["prevent"]),method:"post"},[o("div",Y,[o("div",ee,[e(Q,{name:"name",standout:"",modelValue:t.form.name,"onUpdate:modelValue":n[0]||(n[0]=l=>t.form.name=l),error:!!t.form.errors.name,"error-message":t.form.errors.name,dense:t.dense,placeholder:"Department Name"},null,8,["modelValue","error","error-message","dense"]),e(s,{label:"Update",dense:"",color:"black",type:"submit",disable:t.form.processing},null,8,["disable"])])])],40,X)]),_:1})]),_:1})]),_:1},8,["modelValue"])])]),e(C,{modelValue:u.value,"onUpdate:modelValue":n[3]||(n[3]=l=>u.value=l)},{default:a(()=>[e(D,null,{default:a(()=>[e(g,{class:"row items-center"},{default:a(()=>[e(E,{icon:"delete",color:"red","text-color":"white"}),le]),_:1}),e(g,null,{default:a(()=>[o("div",null,[p(" Type: "),o("b",null,m(v))]),o("div",null,[e(Q,{modelValue:i(f).text,"onUpdate:modelValue":n[2]||(n[2]=l=>i(f).text=l),dense:""},null,8,["modelValue"])])]),_:1}),e(L,{align:"right"},{default:a(()=>[b(e(s,{flat:"",label:"Cancel",color:"primary"},null,512),[[h]]),b(e(s,{flat:"",label:"Delete",onClick:N,color:"primary"},null,512),[[$,i(f).text===v],[h]])]),_:1})]),_:1})]),_:1},8,["modelValue"])],64)}}};export{me as default};

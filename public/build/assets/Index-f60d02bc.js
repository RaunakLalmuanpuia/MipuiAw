import{Q as D}from"./QSpace-4c640a0c.js";import{K as N,g as F,r as c,T as V,o as _,c as h,a,u,b as s,t as n,e as B,h as t,F as I,R as w,Z as R,d as T,L as Y,j as v,Q as j}from"./app-bfca7ec4.js";import{Q as q}from"./QTooltip-947db973.js";import{Q as p}from"./QTd-bd214e85.js";import{Q as L}from"./QTable-e2e2fc3c.js";import{d as M}from"./date-37bbfee8.js";import{u as P}from"./use-quasar-8ef4c359.js";import"./QMenu-7802b655.js";import"./QSelect-0be4b91d.js";import"./QChip-fbdc1a57.js";import"./use-fullscreen-0d7e226b.js";const A={class:"m-5"},O=s("h4",{class:"mb-3"},"Feedback",-1),U={key:0,class:"bg-red-2 border-red-9 mt-5 p-4 mb-5"},E={class:"text-grey-9"},K={class:"q-pa-md"},Z=s("span",{class:"text-2xl"},"Feedback List",-1),le={__name:"Index",props:["feedbacks","errors","search"],setup(f){var k;const r=f,i=P(),y=N(),g=F(()=>y.props.flash.message),Q=c("");c(!1),V({id:"",quote:"",speaker:""});const d=c(r.search),m=c({page:((k=r.feedbacks)==null?void 0:k.current_page)||0,rowsPerPage:r.feedbacks.per_page,rowsNumber:r.feedbacks.total});function x(o){d.value=o,b({pagination:m})}function b(o){const{page:l,rowsPerPage:e}=o.pagination;w.get(route("feedback.index"),{per_page:e,page:l,search:d.value},{})}const C=[{name:"id",align:"left",label:"ID",field:"id",headerClasses:""},{name:"name",align:"left",label:"Name",field:"id"},{name:"subject",align:"left",label:"Subject",field:"subject"},{name:"message",align:"left",label:"Message",field:"message"},{name:"created_at",align:"left",label:"Created_at",field:"created_at",format:o=>M.formatDate(o,"DD MMM YYYY")},{name:"actions",align:"left",label:"Action",field:"id"}],S=o=>{i.dialog({title:"Confirm Delete",message:"Are you sure?",ok:"Yes",cancel:"No"}).onOk(()=>{w.delete(route("feedback.destroy",o),{onStart:()=>i.loading.show({message:"Deleting...."}),onSuccess:()=>{i.notify({message:"Quote deleted",closeBtn:!0}),i.loading.hide()},onFinish:()=>i.loading.hide(),preserveState:!1})}).onCancel(()=>{})};return(o,l)=>(_(),h(I,null,[a(u(R),{title:"Feedback List"}),s("div",A,[O,u(g)?(_(),h("div",U,[s("div",E,n(u(g)),1)])):B("",!0),s("div",K,[a(L,{pagination:m.value,"onUpdate:pagination":l[1]||(l[1]=e=>m.value=e),rows:f.feedbacks.data,columns:C,"row-key":"name",onRowClick:o.rowClicker,flat:"",bordered:"",title:"Feedback List",separator:"cell",onRequest:b,props:r,filter:Q.value},{top:t(()=>[Z,a(D),a(T,{autofocus:"",dense:"",debounce:"800","onUpdate:modelValue":[x,l[0]||(l[0]=e=>d.value=e)],color:"primary",modelValue:d.value,placeholder:"Search"},{append:t(()=>[a(Y,{name:"search"})]),default:t(()=>[a(q,null,{default:t(()=>[v(" Search using Name , email or any text ")]),_:1})]),_:1},8,["modelValue"])]),"body-cell-id":t(e=>[a(p,{key:"id",props:e},{default:t(()=>[v(n(e.rowIndex+1),1)]),_:2},1032,["props"])]),"body-cell-name":t(e=>[a(p,{key:"id",props:e},{default:t(()=>[s("div",null,n(e.row.name),1),s("div",null,n(e.row.email)+","+n(e.row.phone)+", ",1),s("div",null," Source: "+n(e.row.source),1)]),_:2},1032,["props"])]),"body-cell-actions":t(e=>[a(p,{key:"action",props:e},{default:t(()=>[a(j,{dense:"",round:"",flat:"",color:"red",onClick:$=>S(e.row.id),icon:"delete"},null,8,["onClick"])]),_:2},1032,["props"])]),_:1},8,["pagination","rows","onRowClick","props","filter"])])])],64))}};export{le as default};

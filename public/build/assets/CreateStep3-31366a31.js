import{r as C,T as w,o as i,c as d,a,u as r,b as e,d as V,t as p,e as g,n as f,cH as Q,j as _,Q as v,w as k,h as u,i as S,F as M,Z as j,k as B,p as F,N as q,O as A,C as h}from"./app-bfca7ec4.js";import{Q as N}from"./QFile-c0aa8cfa.js";import{u as T}from"./use-quasar-8ef4c359.js";import"./QChip-fbdc1a57.js";const D={class:"py-12"},U={class:"max-w-7xl mx-auto sm:px-6 lg:px-8"},H=e("a",{href:"javascript:history.go(-1)"},[e("i",{class:"q-icon material-icons-outlined"}," arrow_back "),_(" Back ")],-1),R={class:"bg-white overflow-hidden shadow-sm sm:rounded-lg"},z={class:"p-6 text-gray-900 ml-3"},G=e("div",null,[e("h2",{class:"font-semibold text-xl text-gray-800 leading-tight"},"Final Step")],-1),I=["innerHTML"],L={class:"column mb-4"},P=e("label",{for:"grievance"},"Text of Grievance/ Vuivaina thu (Max: 60,000 characters)",-1),$=["textContent"],E=["textContent"],O=e("span",null,"Maximum 8 files. Supported file: jpg, png and pdf. Max total size 8 mb",-1),Z={class:"mt-3"},J=e("label",{for:"agree",class:""},"I agree to the rules and regulations of Mipui Aw, DP&AR Govt. of Mizoram ",-1),K=["textContent"],W={class:"m-5"},X=e("span",{class:"q-ml-sm"},"Are you sure you want to submit?",-1),oe={__name:"CreateStep3",props:["errors","department","randomQuote"],setup(x){const l=x,m=T(),c=C(!1);let o=w({grievance:"",agree:Boolean,files:[]});const b=()=>{let n=l.randomQuote.quote+" - "+l.randomQuote.speaker;o.transform(t=>({department_id:l.department.value,grievance:o.grievance,agree:o.agree,files:o.files})).post("/grievance/store",{onStart:()=>m.loading.show({message:n}),onFinish:()=>{m.loading.hide()}})},y=n=>{m.notify({type:"negative",message:`${n.length} file(s) did not pass validation constraints`})};return(n,t)=>(i(),d(M,null,[a(r(j),{title:"Step-3"}),e("form",{onSubmit:t[4]||(t[4]=k((...s)=>n.submit&&n.submit(...s),["prevent"]))},[e("div",D,[e("div",U,[H,e("div",R,[e("div",z,[G,e("div",{class:"mb-4",innerHTML:x.department.label},null,8,I),e("div",L,[P,a(V,{label:"",modelValue:r(o).grievance,"onUpdate:modelValue":t[0]||(t[0]=s=>r(o).grievance=s),type:"textarea",class:"border p-1",id:"grievance",rows:"5"},null,8,["modelValue"]),l.errors.grievance?(i(),d("div",{key:0,textContent:p(l.errors.grievance),class:"text-red-500 text-xs mt-3"},null,8,$)):g("",!0)]),e("div",null,[a(N,{modelValue:r(o).files,"onUpdate:modelValue":t[1]||(t[1]=s=>r(o).files=s),label:"Select to upload attachment",outlined:"","use-chips":"",multiple:"",style:{"max-width":"300px"},accept:".jpg,.jpeg,.png,.gif,.pdf","max-files":"10",append:"",onRejected:y},null,8,["modelValue"]),l.errors.files?(i(),d("div",{key:0,textContent:p(l.errors.files),class:"text-red-500 text-xs mt-3"},null,8,E)):g("",!0),O]),e("div",Z,[f(e("input",{type:"checkbox","onUpdate:modelValue":t[2]||(t[2]=s=>r(o).agree=s),name:"agree",id:"agree",class:""},null,512),[[Q,r(o).agree]]),_(),J,l.errors.agree?(i(),d("div",{key:0,textContent:p(l.errors.agree),class:"text-red-500 text-xs mt-3"},null,8,K)):g("",!0)])])]),e("div",W,[a(v,{label:"Submit",color:"primary",onClick:t[3]||(t[3]=s=>c.value=!0)})])])])],32),a(S,{modelValue:c.value,"onUpdate:modelValue":t[5]||(t[5]=s=>c.value=s)},{default:u(()=>[a(B,null,{default:u(()=>[a(F,{class:"row items-center"},{default:u(()=>[a(q,{icon:"done",color:"primary","text-color":"white"}),X]),_:1}),a(A,{align:"right"},{default:u(()=>[f(a(v,{flat:"",label:"Cancel",color:"primary"},null,512),[[h]]),f(a(v,{flat:"",label:"Submit",onClick:b,color:"primary"},null,512),[[h]])]),_:1})]),_:1})]),_:1},8,["modelValue"])],64))}};export{oe as default};

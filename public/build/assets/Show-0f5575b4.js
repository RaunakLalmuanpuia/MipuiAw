import{r as v,K as te,g as se,T as Q,z as oe,o as i,c as a,a as o,u as _,b as e,Q as m,S as r,t as n,j as h,n as f,P as ie,e as u,h as c,F as D,b5 as V,M as ae,b6 as ne,i as M,Z as ce,k as U,p as b,O as N,ac as G,d as O,C as y}from"./app-bfca7ec4.js";import{Q as re}from"./QTooltip-947db973.js";import{Q as k}from"./QTd-bd214e85.js";import{Q as de}from"./QTable-e2e2fc3c.js";import{Q as _e}from"./QSelect-0be4b91d.js";import{Q as ue}from"./QFile-c0aa8cfa.js";import{d as $}from"./date-37bbfee8.js";import{u as me}from"./use-quasar-8ef4c359.js";import"./QMenu-7802b655.js";import"./use-fullscreen-0d7e226b.js";import"./QChip-fbdc1a57.js";const ve={class:"m-5"},he={class:"border shadow"},pe=e("div",{class:"p-3 bg-grey-4 text-h5"}," Grievance Details ",-1),ge={class:"p-5"},fe={class:"row m-3"},be=e("hr",null,null,-1),ye={class:"row m-3"},ke=e("hr",null,null,-1),we={class:"row m-3"},xe=e("hr",null,null,-1),De={class:"row m-3"},$e=e("hr",null,null,-1),Ce={class:"row m-3"},Re=e("hr",null,null,-1),qe={class:"row m-3"},Ae=e("hr",null,null,-1),Fe={class:"row m-3"},Ve=e("hr",null,null,-1),Me={class:"row m-3"},Ue=e("hr",null,null,-1),Ne={class:"row m-3"},Se={href:"#"},Ee={key:0,class:"text-end text-caption"},Te={key:1,class:"clickable cursor-pointer text-end"},Ye={key:0},Ie=e("span",{class:"text-caption",style:{"text-decoration":"underline"}},"Edit",-1),Qe=e("hr",null,null,-1),Ge={class:"row m-3"},Oe={key:0},Be=["href"],Pe={class:"clickable text-blue"},ze=e("hr",null,null,-1),je={key:0,class:"border shadow mt-3"},He=e("div",{class:"p-3 bg-grey-8 text-h5 text-grey-1"}," Grievance Reply ",-1),Le={class:"p-5",style:{"white-space":"pre-line"}},Ze=e("br",null,null,-1),Ke={class:"mb-3"},We={key:0},Je={key:0},Xe={class:"ml-4"},el=["href"],ll={class:"clickable text-blue"},tl={key:0,class:"text-caption"},sl={key:1,class:"border shadow mt-3"},ol=e("div",{class:"p-3 bg-grey-8 text-h5 text-grey-1"}," Officer Details ",-1),il={class:"p-3",style:{"white-space":"pre-line"}},al={class:"row m-3"},nl=e("hr",null,null,-1),cl={class:"row m-3"},rl=e("hr",null,null,-1),dl={class:"row m-3"},_l=e("hr",null,null,-1),ul={class:"row m-3"},ml=e("hr",null,null,-1),vl={key:2,class:"mt-3 border shadow"},hl=e("div",{class:"row p-3 bg-grey-8 text-h5 text-grey-1"}," Feedback ",-1),pl={class:"p-5",style:{"white-space":"pre-line"}},gl=e("br",null,null,-1),fl={key:0},bl={key:1},yl={key:2},kl={key:3},wl={key:4},xl={class:"border shadow mt-5"},Dl=e("div",{class:"p-3 bg-green-4 text-h5"}," Grievance Movement ",-1),$l={class:"q-pa-md"},Cl={key:0},Rl={key:0},ql={key:1},Al={key:1},Fl={key:2},Vl={key:0},Ml={key:1},Ul={key:0},Nl={key:0},Sl={key:0},El={key:1},Tl={key:1},Yl={key:0},Il={key:1},Ql={class:"mt-5 text-center"},Gl={class:"q-gutter-sm"},Ol=e("div",{class:"text-h6"},"Remark",-1),Bl={class:"mb-3",style:{"white-space":"pre-line"}},Pl={key:0},zl={class:"ml-4"},jl=["href"],Hl={class:"clickable text-blue"},Ll=e("div",{class:"text-h6 full-width text-center"},"How satisfied are you?",-1),Zl={class:"row"},Kl=e("div",{class:"col-6 text-right pr-4"}," Registration Number ",-1),Wl={class:"col-6 text-bold"},Jl={class:"row mt-3"},Xl=e("div",{class:"col-6 text-right pr-4"}," Rating ",-1),et={class:"col-6"},lt={key:0,class:"row text-blue-8"},tt=e("div",{class:"col-9 text-right"}," note: 'Poor' select chiah hian a Appeal theih ",-1),st=[tt],ot={class:"row mt-3"},it=e("div",{class:"col-6 text-right pr-4"}," Comments ",-1),at={class:"col-6"},nt={class:"row mt-5"},ct=e("div",{class:"col-6"},null,-1),rt={class:"col-6"},dt={key:0,class:"mb-3"},_t={class:"ml-4 mb-4"},ut=["href"],mt={class:"clickable text-blue"},vt=["onClick"],ht=e("span",{class:"q-ml-sm"},"Are you sure to delete?",-1),qt={__name:"Show",props:["grievance","case","mUserFiles","mNodalFiles","EDITING_HOURS_FOR_CITIZEN"],setup(p){const s=p;v(null);const B=te(),w=me(),P=se(()=>B.props.CURRENT_USER),S=v(!1);v(!1);const E=v(!1),z=v(!0),C=v(""),T=v(!1),I=v(null),R=v(null);let Y=0,g=Q({category:"",feedback:"",grievance_id:s.grievance.id}),x=v(!1),q="";const j=[{value:1,label:"Poor"},{value:2,label:"Average"},{value:3,label:"Good"},{value:4,label:"Very Good"},{value:5,label:"Excellent"}],H=()=>{g.post("/grievance/citizen/feedback",{onStart:()=>w.loading.show({message:"Loading..."}),onFinish:()=>{w.loading.hide()}})},L=t=>{console.log(t),window.open("/grievance/print/"+t,"_blank")},Z=[{name:"id",align:"left",label:"Sl No",field:"id"},{name:"date_of_action",align:"left",label:"Date of Action",field:"date_of_action",format:t=>$.formatDate(t,"DD MMM YYYY, hh:mm A")},{name:"action",align:"left",label:"Department Action",field:"action",format:t=>t.label},{name:"action_taken_by",align:"left",label:"Action Taken By",field:"id"},{name:"from",align:"left",label:"From",field:"from_id"},{name:"to",align:"left",label:"To",field:"to_id"},{name:"remark",align:"left",label:"Remark",field:"id"}],K=t=>{q=t,x.value=!0};oe(()=>{s.grievance.grievance_description.length>330?(s.grievance.grievance_description_modify=s.grievance.grievance_description.slice(0,330)+"...",C.value="Read More"):s.grievance.grievance_description_modify=s.grievance.grievance_description});const W=()=>{Y++,console.log(Y%2),Y%2?(C.value="Read Less",s.grievance.grievance_description_modify=s.grievance.grievance_description):(C.value="Read More",s.grievance.grievance_description_modify=s.grievance.grievance_description.slice(0,330)+"...")};let A=Q({grievance_id:"",grievance_description:"",editGrievanceFiles:[]});const J=t=>{A.transform(d=>({grievance_id:t.id,grievance_description:t.grievance_description,mUserFiles:s.mUserFiles,editGrievanceFiles:A.editGrievanceFiles,editRemovedFiles:I})).post("/grievance/citizen/update",{onStart:()=>w.loading.show({message:"Uploading..."}),onFinish:()=>{w.loading.hide()},onSuccess:()=>{w.notify({message:"Grievance Update Successfully",icon:"check",iconColor:"blue"})}})},X=()=>{console.log(R.value),s.mUserFiles.splice(R.value,1),I.push(s.mNodalFiles(R.value))},ee=t=>{T.value=!0,R.value=t},le=t=>t.split(",");return(t,d)=>(i(),a(D,null,[o(_(ce),{title:"Description"}),e("div",null,[e("div",ve,[o(m,{class:"mb-3",href:"#",onclick:"history.back();return false;",color:"grey-4","text-color":"black",label:"Back"}),e("div",he,[pe,e("div",null,[e("div",ge,[e("div",fe,[e("div",{class:r(t.$q.screen.xs?"col-12":"col-4")}," Registration Number ",2),e("div",{class:r(t.$q.screen.xs?"col-12":"col-8")},n(s.grievance.registration_number),3)]),be,e("div",ye,[e("div",{class:r(t.$q.screen.xs?"col-12":"col-4")}," Name ",2),e("div",{class:r(t.$q.screen.xs?"col-12":"col-8")},n(s.grievance.applicant_name),3)]),ke,e("div",we,[e("div",{class:r(t.$q.screen.xs?"col-12":"col-4")}," Date of Receipt ",2),e("div",{class:r(t.$q.screen.xs?"col-12":"col-8")},n(_($).formatDate(s.grievance.date_of_receipt,"DD MMM YYYY, hh:mm A")),3)]),xe,e("div",De,[e("div",{class:r(t.$q.screen.xs?"col-12":"col-4")}," Address ",2),e("div",{class:r(t.$q.screen.xs?"col-12":"col-8")},n(s.grievance.applicant_address),3)]),$e,e("div",Ce,[e("div",{class:r(t.$q.screen.xs?"col-12":"col-4")}," District ",2),e("div",{class:r(t.$q.screen.xs?"col-12":"col-8")},n(s.grievance.applicant_district),3)]),Re,e("div",qe,[e("div",{class:r(t.$q.screen.xs?"col-12":"col-4")}," Mobile Number ",2),e("div",{class:r(t.$q.screen.xs?"col-12":"col-8")},n(s.grievance.applicant_mobile),3)]),Ae,e("div",Fe,[e("div",{class:r(t.$q.screen.xs?"col-12":"col-4")}," Email ID ",2),e("div",{class:r(t.$q.screen.xs?"col-12":"col-8")},n(s.grievance.applicant_email),3)]),Ve,e("div",Me,[e("div",{class:r(t.$q.screen.xs?"col-12":"col-4")}," Department ",2),e("div",{class:r(t.$q.screen.xs?"col-12":"col-8"),style:{"white-space":"pre-line"}},n(s.grievance.department.organization_name),3)]),Ue,e("div",Ne,[e("div",{class:r(t.$q.screen.xs?"col-12":"col-4")}," Grievance Description ",2),e("div",{class:r(t.$q.screen.xs?"col-12":"col-8"),style:{"white-space":"pre-line"}},[e("div",null,[h(n(s.grievance.grievance_description_modify)+" ",1),f(e("div",{onClick:W,class:"text-blue-8 underline italics"},[e("a",Se,n(C.value),1)],512),[[ie,z.value]]),p.grievance.update_date_of_receipt!=null?(i(),a("div",Ee,[e("em",null," Edited "+n(_($).formatDate(s.grievance.update_date_of_receipt,"DD MMM YYYY, hh:mm A")),1)])):u("",!0),s.grievance.edit?(i(),a("div",Te,[_(P).id==s.grievance.user_id?(i(),a("div",Ye,[e("span",{onClick:d[0]||(d[0]=l=>S.value=!0)},[Ie,o(re,null,{default:c(()=>[h(" Can be edit within "+n(p.EDITING_HOURS_FOR_CITIZEN)+" hr(s) of submit ",1)]),_:1})])])):u("",!0)])):u("",!0)])],2)]),Qe,e("div",Ge,[e("div",{class:r(t.$q.screen.xs?"col-12":"col-4")}," Attachment ",2),e("div",{class:r(t.$q.screen.xs?"col-12":"col-8"),style:{"white-space":"pre-line"}},[t.$props.mUserFiles!=null?(i(),a("div",Oe,[(i(!0),a(D,null,V(t.$props.mUserFiles,(l,F)=>(i(),a("li",null,[e("a",{href:"../../../../../../storage/files/"+l,target:"_blank"},[e("span",Pe,n(l),1)],8,Be)]))),256))])):u("",!0)],2)]),ze])])]),s.case.status==!0?(i(),a("div",je,[He,e("div",Le,[e("div",null,n(s.case.remark),1),Ze,e("div",Ke,[t.$props.mNodalFiles!=null?(i(),a("div",We,[t.$props.mNodalFiles.length!=0?(i(),a("span",Je,[h("Attachment: "),(i(!0),a(D,null,V(t.$props.mNodalFiles,(l,F)=>(i(),a("li",Xe,[e("a",{href:"../../../../../../storage/files/"+l,target:"_blank"},[e("span",ll,n(l),1)],8,el)]))),256))])):u("",!0)])):u("",!0)]),h(" Date: "+n(_($).formatDate(s.case.date_of_action,"DD MMM YYYY, hh:mm A"))+" ",1),s.grievance.update_date_of_final_remark!=null?(i(),a("div",tl," Edited "+n(_($).formatDate(s.grievance.update_date_of_final_remark,"DD MMM YYYY, hh:mm A")),1)):u("",!0)])])):u("",!0),s.case.status==!0?(i(),a("div",sl,[ol,e("div",il,[e("div",al,[e("div",{class:r(t.$q.screen.xs?"col-12":"col-4")}," Officer Name ",2),e("div",{class:r(t.$q.screen.xs?"col-12":"col-8")},n(s.grievance.officer_name),3)]),nl,e("div",cl,[e("div",{class:r(t.$q.screen.xs?"col-12":"col-4")}," Designation ",2),e("div",{class:r(t.$q.screen.xs?"col-12":"col-8")},n(s.grievance.officer_designation),3)]),rl,e("div",dl,[e("div",{class:r(t.$q.screen.xs?"col-12":"col-4")}," Phone ",2),e("div",{class:r(t.$q.screen.xs?"col-12":"col-8")},n(s.grievance.officer_mobile),3)]),_l,e("div",ul,[e("div",{class:r(t.$q.screen.xs?"col-12":"col-4")}," Email ID ",2),e("div",{class:r(t.$q.screen.xs?"col-12":"col-8")},n(s.grievance.officer_email),3)]),ml])])):u("",!0),s.grievance.applicant_feedback!=null?(i(),a("div",vl,[e("div",null,[hl,e("div",pl,[h(" Comments: "+n(s.grievance.applicant_feedback)+" ",1),gl,h(" Rating: "),s.grievance.applicant_rating==1?(i(),a("span",fl," Poor ")):s.grievance.applicant_rating==2?(i(),a("span",bl," Average ")):s.grievance.applicant_rating==3?(i(),a("span",yl," Good ")):s.grievance.applicant_rating==4?(i(),a("span",kl," Very Good ")):s.grievance.applicant_rating==5?(i(),a("span",wl," Excellent ")):u("",!0)])])])):u("",!0),e("div",xl,[Dl,e("div",null,[e("div",$l,[o(de,{rows:s.grievance.grievance_movement,columns:Z,"table-header-class":"bg-grey-2","row-key":"name",flat:"",bordered:"","wrap-cells":""},{"body-cell-id":c(l=>[o(k,{key:"id",props:l},{default:c(()=>[h(n(l.rowIndex+1),1)]),_:2},1032,["props"])]),"body-cell-action":c(l=>[o(k,{props:l},{default:c(()=>[l.row.from_type=="App\\Models\\SubDepartment"?(i(),a("div",Cl,[l.row.action_id==2?(i(),a("div",Rl," TAKE UP WITH SUBORDINATE ORGANIZATION ")):(i(),a("div",ql,n(l.row.action.label),1))])):l.row.is_duplicate==!0?(i(),a("div",Al," TRANSFERRED ")):(i(),a("div",Fl,n(l.row.action.label),1))]),_:2},1032,["props"])]),"body-cell-action_taken_by":c(l=>[o(k,{key:"id",props:l},{default:c(()=>[l.row.officer_name!=null?(i(),a("span",Vl,n(l.row.officer_name)+", "+n(l.row.officer_designation)+", Ph:"+n(l.row.officer_mobile),1)):u("",!0),l.row.action_id==9||l.row.action_id==8||l.row.action_id==6?(i(),a("span",Ml,n(l.row.from.name),1)):u("",!0)]),_:2},1032,["props"])]),"body-cell-from":c(l=>[o(k,{key:"id",props:l},{default:c(()=>[e("div",null,n(l.row.from_type==="App\\Models\\User"?l.row.from.name:l.row.from.organization_name),1)]),_:2},1032,["props"])]),"body-cell-to":c(l=>[o(k,{key:"id",props:l},{default:c(()=>[e("div",null,n(l.row.to_type==="App\\Models\\User"?l.row.to.name:l.row.to.organization_name),1)]),_:2},1032,["props"])]),"body-cell-remark":c(l=>[o(k,{key:"id",props:l},{default:c(()=>[l.row.action_id==2?(i(),a("div",Ul,[l.row.from_type=="App\\Models\\SubDepartment"?(i(),a("div",Nl,[l.row.action_id==2?(i(),a("div",Sl," - ")):(i(),a("div",El,n(l.row.action.label),1))])):(i(),a("div",Tl,[l.row.from_type!="AppModelsSubDepartment"?(i(),a("div",Yl,[o(m,{color:"primary",label:"View Remark","no-caps":"",onClick:F=>K(l.row)},null,8,["onClick"])])):u("",!0)]))])):(i(),a("div",Il," - "))]),_:2},1032,["props"])]),_:1},8,["rows"])])])]),e("div",Ql,[e("div",Gl,[o(m,{color:"primary",icon:"home",onclick:"history.back();return false;",label:"Back To Home Page"}),o(m,{color:"primary",icon:"print",label:"Print",onClick:d[1]||(d[1]=l=>L(s.grievance.id))}),s.grievance.applicant_feedback==null&&p.grievance.action_id===7?(i(),ae(m,{key:0,color:"amber-8",icon:"reviews",label:"Feedback",onClick:d[2]||(d[2]=l=>E.value=!0)})):u("",!0)])])])]),o(M,{modelValue:_(x),"onUpdate:modelValue":d[3]||(d[3]=l=>ne(x)?x.value=l:x=l),"transition-show":"scale","transition-hide":"scale"},{default:c(()=>[o(U,null,{default:c(()=>[o(b,{class:"bg-light-green text-white mb-3"},{default:c(()=>[Ol]),_:1}),o(b,{class:"q-pt-none"},{default:c(()=>[e("div",Bl,n(_(q).remark),1),_(q).nodal_attachment?(i(),a("div",Pl,[h(" Attachment(s): "),(i(!0),a(D,null,V(le(_(q).nodal_attachment),l=>(i(),a("li",zl,[e("a",{href:"../../../../../../storage/files/"+l,target:"_blank"},[e("span",Hl,n(l),1)],8,jl)]))),256))])):u("",!0)]),_:1}),o(N,{align:"right",class:"bg-white text-teal"},{default:c(()=>[f(o(m,{flat:"",label:"OK"},null,512),[[y]])]),_:1})]),_:1})]),_:1},8,["modelValue"]),o(M,{modelValue:E.value,"onUpdate:modelValue":d[6]||(d[6]=l=>E.value=l),persistent:""},{default:c(()=>[o(U,{style:{width:"700px","max-width":"80vw"}},{default:c(()=>[o(b,null,{default:c(()=>[Ll]),_:1}),o(G),o(b,{style:{"max-height":"50vh"},class:"scroll"},{default:c(()=>[e("p",null,[e("div",Zl,[Kl,e("div",Wl,n(p.grievance.registration_number),1)]),e("div",Jl,[Xl,e("div",et,[o(_e,{outlined:"",dense:!0,modelValue:_(g).category,"onUpdate:modelValue":d[4]||(d[4]=l=>_(g).category=l),options:j,error:!!_(g).errors.category,"error-message":_(g).errors.category,label:"-- Select category --"},null,8,["modelValue","error","error-message"])])]),_(g).category.value==1?(i(),a("div",lt,st)):u("",!0),e("div",ot,[it,e("div",at,[o(O,{outlined:"",type:"textarea",modelValue:_(g).feedback,"onUpdate:modelValue":d[5]||(d[5]=l=>_(g).feedback=l)},null,8,["modelValue"])])]),e("div",nt,[ct,e("div",rt,[o(m,{color:"primary",icon:"save",label:"Submit",onClick:H})])])])]),_:1}),o(G),o(N,{align:"right"},{default:c(()=>[f(o(m,{flat:"",label:"Cancel",color:"primary"},null,512),[[y]])]),_:1})]),_:1})]),_:1},8,["modelValue"]),o(M,{modelValue:S.value,"onUpdate:modelValue":d[10]||(d[10]=l=>S.value=l)},{default:c(()=>[o(U,null,{default:c(()=>[o(b,{class:"bg-blue-grey-9 text-white mb-3"},{default:c(()=>[h(" EDIT GRIEVANCE ")]),_:1}),o(b,{class:"q-pt-none"},{default:c(()=>[o(O,{modelValue:p.grievance.grievance_description,"onUpdate:modelValue":d[7]||(d[7]=l=>p.grievance.grievance_description=l),type:"textarea",class:"border p-1 mb-3",rows:"5",style:{width:"590px"}},null,8,["modelValue"]),t.$props.mNodalFiles!=null?(i(),a("div",dt,[e("span",null,[h("Attachment: "),(i(!0),a(D,null,V(t.$props.mUserFiles,(l,F)=>(i(),a("li",_t,[e("a",{href:"../../../../../../storage/files/"+l,target:"_blank"},[e("span",mt,n(l),1)],8,ut),e("span",{onClick:pt=>ee(F),class:"ml-5 text-caption clickable cursor-pointer"},"remove",8,vt)]))),256))])])):u("",!0),o(ue,{name:"xfile",modelValue:_(A).editGrievanceFiles,"onUpdate:modelValue":d[8]||(d[8]=l=>_(A).editGrievanceFiles=l),label:"Select to upload attachment",outlined:"","use-chips":"",multiple:"",style:{"max-width":"300px"},accept:"image/jpeg,/image/jpg,image/png,.pdf","max-files":"10",append:"",onRejected:t.onRejected,class:"mb-2"},null,8,["modelValue","onRejected"])]),_:1}),o(N,{align:"right",class:"bg-white text-teal"},{default:c(()=>[f(o(m,{flat:"",label:"Update",onClick:d[9]||(d[9]=l=>J(p.grievance))},null,512),[[y]]),f(o(m,{flat:"",label:"Cancel"},null,512),[[y]])]),_:1})]),_:1})]),_:1},8,["modelValue"]),o(M,{modelValue:T.value,"onUpdate:modelValue":d[12]||(d[12]=l=>T.value=l)},{default:c(()=>[o(U,null,{default:c(()=>[o(b,{class:"row items-center"},{default:c(()=>[ht]),_:1}),o(N,{align:"right"},{default:c(()=>[f(o(m,{flat:"",label:"Cancel",color:"primary"},null,512),[[y]]),f(o(m,{onClick:d[11]||(d[11]=l=>X(t.index)),flat:"",label:"Delete",color:"primary"},null,512),[[y]])]),_:1})]),_:1})]),_:1},8,["modelValue"])],64))}};export{qt as default};

import{Q as w}from"./QTd-bd214e85.js";import{r as m,T as P,J as L,o as k,c as h,a as e,u as r,b as n,h as l,i as Q,F as Y,Z as $,j as V,t as D,Q as d,k as U,l as F,m as O,n as c,p as x,w as j,d as z,P as J,e as Z,O as G,C}from"./app-bfca7ec4.js";import{Q as H}from"./QTable-e2e2fc3c.js";import{Q as K}from"./QSelect-0be4b91d.js";import{d as W}from"./date-37bbfee8.js";import{u as X}from"./use-quasar-8ef4c359.js";import{u as ee}from"./vue-router-9d2630ad.js";import"./use-fullscreen-0d7e226b.js";import"./QChip-fbdc1a57.js";import"./QMenu-7802b655.js";const te={class:"m-5"},ae=n("h4",{class:"mb-3"},"Category",-1),oe={class:"q-pa-md"},le=n("span",{class:"text-weight-bold"},"Edit Action",-1),se=["onSubmit"],ne={class:"q-pa-md"},re={class:"q-gutter-x-md column",style:{width:"400px"}},de={class:"mb-3"},ie=n("span",{class:"q-ml-sm"},"Are you sure you want to delete? ",-1),me={key:0,class:"text-red text-lg"},we={__name:"Index",props:["categories","departments","errors","CURRENT_USER"],setup(p){const _=p,N=X();let b=m(!0);const f=m(!1),i=m(""),g=m(""),u=m(!1);let s=P({id:"",name:"",department:""});const R=ee();var y="";const S=a=>{console.log(a.visible),console.log("oasis");let t=_.departments.find(v=>v.value===a.department.id);u.value=!0,s.id=a.id,s.name=a.name,s.department=t,y=a.department_id},T=a=>{a.isUsed&&(i.value="This category is already used. Please cancel if you do not want to delete."),f.value=!0,g.value=a.id},E=()=>{g.value="",i.value=""},I=()=>{i.value="",s.delete(route("category.destroy",g.value),{})},A=[{name:"id",align:"left",label:"ID",field:"id",headerClasses:""},{name:"name",align:"left",label:"Name",field:"name"},{name:"department",align:"left",label:"Department ID",field:"department",format:a=>a.organization_name},{name:"created_at",align:"left",label:"Created_at",field:"created_at",format:a=>W.formatDate(a,"DD MMM YYYY")},{name:"actions",align:"left",label:"Action",field:"id"}],B=(a,t)=>{console.log(R)};_.CURRENT_USER.role_id==3&&(b=!1);const M=a=>{s.transform(t=>({...t,department:y})).put(route("category.update",s.id),{onSuccess:t=>{u.value=!1,N.notify({message:"Category Updated",closeBtn:!0,icon:"check",iconColor:"blue"})}})};return(a,t)=>{const v=L("Link");return k(),h(Y,null,[e(r($),{title:"Category List"}),n("div",te,[ae,e(v,{href:a.route("category.create"),class:"p-2 m-5 bg-blue-5 text-white shadow-2"},{default:l(()=>[V("New Category")]),_:1},8,["href"]),n("div",oe,[e(H,{rows:p.categories,columns:A,"row-key":"name",onRowClick:B,flat:"",bordered:"",title:"Action List",separator:"cell",pagination:{sortBy:"id",rowsPerPage:10},"records-per-page-options":"[1,5,10]"},{"body-cell-id":l(o=>[e(w,{key:"id",props:o},{default:l(()=>[V(D(o.rowIndex+1),1)]),_:2},1032,["props"])]),"body-cell-actions":l(o=>[e(w,{key:"action",props:o},{default:l(()=>[e(d,{dense:"",round:"",flat:"",color:"green",onClick:q=>S(o.row),icon:"edit"},null,8,["onClick"]),e(d,{dense:"",round:"",flat:"",color:"red",onClick:q=>T(o.row),icon:"delete"},null,8,["onClick"])]),_:2},1032,["props"])]),_:1},8,["rows"]),e(Q,{modelValue:u.value,"onUpdate:modelValue":t[2]||(t[2]=o=>u.value=o)},{default:l(()=>[e(U,null,{default:l(()=>[e(F,null,{default:l(()=>[e(O,null,{default:l(()=>[le]),_:1}),c(e(d,{flat:"",round:"",dense:"",icon:"close"},null,512),[[C]])]),_:1}),e(x,null,{default:l(()=>[n("form",{onSubmit:j(M,["prevent"]),method:"put"},[n("div",ne,[n("div",re,[e(z,{name:"Name",standout:"",modelValue:r(s).name,"onUpdate:modelValue":t[0]||(t[0]=o=>r(s).name=o),error:!!r(s).errors.name,"error-message":r(s).errors.name,dense:a.dense,placeholder:"Category Name"},null,8,["modelValue","error","error-message","dense"]),c(n("div",de,[e(K,{modelValue:r(s).department,"onUpdate:modelValue":t[1]||(t[1]=o=>r(s).department=o),options:p.departments,label:"-- Select department --"},null,8,["modelValue","options"])],512),[[J,r(b)]]),n("div",null,[e(d,{label:"Update",dense:"",color:"black",type:"submit",disable:r(s).processing},null,8,["disable"])])])])],40,se)]),_:1})]),_:1})]),_:1},8,["modelValue"])])]),e(Q,{modelValue:f.value,"onUpdate:modelValue":t[5]||(t[5]=o=>f.value=o),persistent:""},{default:l(()=>[e(U,null,{default:l(()=>[e(x,{class:"row items-center"},{default:l(()=>[ie,i.value?(k(),h("span",me,D(i.value),1)):Z("",!0)]),_:1}),e(G,{align:"right"},{default:l(()=>[c(e(d,{flat:"",label:"Cancel",onClick:t[3]||(t[3]=o=>E()),color:"primary"},null,512),[[C]]),c(e(d,{flat:"",label:"Delete Anyway",onClick:t[4]||(t[4]=o=>I()),color:"primary"},null,512),[[C]])]),_:1})]),_:1})]),_:1},8,["modelValue"])],64)}}};export{we as default};

import{r as Q,K as T,g as y,T as U,J as I,o as g,c as _,a,u as o,b as s,j as f,t as u,Q as d,h as l,e as k,i as A,F as B,Z as M,k as O,l as Y,m as q,n as E,p as F,w as R,d as m,R as L,C as P}from"./app-bfca7ec4.js";import{Q as V}from"./QTd-bd214e85.js";import{Q as $}from"./QTable-e2e2fc3c.js";import{d as j}from"./date-37bbfee8.js";import{u as G}from"./use-quasar-8ef4c359.js";import"./index-d04a8c6f.js";import"./QSelect-0be4b91d.js";import"./QChip-fbdc1a57.js";import"./QMenu-7802b655.js";import"./use-fullscreen-0d7e226b.js";const J={class:"p-5"},K={key:0,class:"bg-red-2 border-red-9 mt-5 p-4 border-2"},W=s("div",{class:"text-red-9 text-h6 text-bold"}," WARNING! ",-1),Z={class:"text-grey-9"},H={key:1,class:"bg-green-2 border-green-9 mt-5 p-4 border-2"},X=s("div",{class:"text-green-9 text-h6 text-bold"}," SUCCESS! ",-1),ee={class:"text-grey-9"},oe={class:"q-pa-md"},ae=s("span",{class:"text-weight-bold"},"Edit Department",-1),re=["onSubmit"],te={class:"q-pa-md"},ne={class:"q-gutter-x-md column",style:{width:"400px"}},fe={__name:"Index",props:{sibling:[],departmentName:"",departmentId:""},setup(p){const i=G(),c=Q(!1),b=T(),h=y(()=>b.props.flash.message),z=y(()=>b.props.flash.message_success),e=U({id:"",sibling:"",organization_name:"",organization_address:"",organization_code:"",organization_type:"",pincode:""}),v=t=>{c.value=!0,e.organization_name=t.organization_name,e.organization_address=t.organization_address,e.organization_code=t.organization_code,e.organization_type=t.organization_type,e.pincode=t.pincode,e.id=t.id},C=[{name:"id",align:"left",label:"Sl No",field:"id",headerClasses:""},{name:"name",align:"left",label:"Department Name",field:"organization_name"},{name:"created_at",align:"left",label:"Created_at",field:"created_at",format:t=>j.formatDate(t,"DD MMM YYYY, hh:mm A")},{name:"actions",align:"left",label:"Action",field:"id"}],w=(t,n)=>{console.log(t)},x=t=>{console.log("Im the only one: "+e.id),e.put(route("subdepartment.update",e.id),{onStart:()=>{i.loading.show()},onSuccess:()=>{i.loading.hide(),i.notify({message:"Sub-Department Updated",closeBtn:!0,icon:"check",iconColor:"blue"}),c.value=!1},onFinish:()=>{i.loading.hide()}})},D=t=>{i.dialog({title:"Confirm Delete",message:"Are you sure?",ok:"Yes",cancel:"No"}).onOk(()=>{L.delete(route("subdepartment.destroy",t),{onStart:()=>i.loading.show({}),onSuccess:()=>{i.loading.hide()},onFinish:()=>i.loading.hide()})})};return(t,n)=>{const S=I("Link");return g(),_(B,null,[a(o(M),{title:"Sub Organization"}),s("div",J,[s("h4",null,[f("Sub Organization of "),s("b",null,u(p.departmentName)+" 🏢",1)]),s("div",null,[a(d,{class:"m-4",href:"#",onclick:"history.back();return false;",color:"primary",label:"Back"})]),a(S,{href:"/sibling/create/"+p.departmentId,class:"p-2 m-5 bg-blue-5 text-white shadow-2"},{default:l(()=>[f("New Sub Org")]),_:1},8,["href"]),o(h)?(g(),_("div",K,[W,s("div",Z,u(o(h)),1)])):k("",!0),o(z)?(g(),_("div",H,[X,s("div",ee,u(o(z)),1)])):k("",!0),s("div",oe,[a($,{rows:p.sibling,columns:C,"row-key":"name",onRowClick:w,flat:"",bordered:"",title:"Department List",separator:"cell"},{"body-cell-id":l(r=>[a(V,{key:"id",props:r},{default:l(()=>[f(u(r.rowIndex+1),1)]),_:2},1032,["props"])]),"body-cell-actions":l(r=>[a(V,{key:"action",props:r},{default:l(()=>[a(d,{dense:"",round:"",flat:"",color:"green",onClick:N=>v(r.row),icon:"edit"},null,8,["onClick"]),a(d,{dense:"",round:"",flat:"",color:"red",onClick:N=>D(r.row.id),icon:"delete"},null,8,["onClick"])]),_:2},1032,["props"])]),_:1},8,["rows"]),a(A,{modelValue:c.value,"onUpdate:modelValue":n[5]||(n[5]=r=>c.value=r)},{default:l(()=>[a(O,null,{default:l(()=>[a(Y,null,{default:l(()=>[a(q,null,{default:l(()=>[ae]),_:1}),E(a(d,{flat:"",round:"",dense:"",icon:"close"},null,512),[[P]])]),_:1}),a(F,null,{default:l(()=>[s("form",{onSubmit:R(x,["prevent"]),method:"post"},[s("div",te,[s("div",ne,[a(m,{name:"organization_name",modelValue:o(e).organization_name,"onUpdate:modelValue":n[0]||(n[0]=r=>o(e).organization_name=r),error:!!o(e).errors.organization_name,"error-message":o(e).errors.organization_name,label:"Department Name",placeholder:"Department Name"},null,8,["modelValue","error","error-message"]),a(m,{name:"organization_code",modelValue:o(e).organization_code,"onUpdate:modelValue":n[1]||(n[1]=r=>o(e).organization_code=r),error:!!o(e).errors.organization_code,"error-message":o(e).errors.organization_code,label:"Department Code",placeholder:"Department Code"},null,8,["modelValue","error","error-message"]),a(m,{name:"organization_type",modelValue:o(e).organization_type,"onUpdate:modelValue":n[2]||(n[2]=r=>o(e).organization_type=r),error:!!o(e).errors.organization_type,"error-message":o(e).errors.organization_type,label:"Department Type",placeholder:"Department Type"},null,8,["modelValue","error","error-message"]),a(m,{name:"organization_address",modelValue:o(e).organization_address,"onUpdate:modelValue":n[3]||(n[3]=r=>o(e).organization_address=r),error:!!o(e).errors.organization_address,"error-message":o(e).errors.organization_address,label:"Department Address",placeholder:"Department Address"},null,8,["modelValue","error","error-message"]),a(m,{name:"pincode",modelValue:o(e).pincode,"onUpdate:modelValue":n[4]||(n[4]=r=>o(e).pincode=r),error:!!o(e).errors.pincode,"error-message":o(e).errors.pincode,label:"Pincode",placeholder:"Pincode"},null,8,["modelValue","error","error-message"]),a(d,{label:"Update",dense:"",color:"black",type:"submit",disable:o(e).processing},null,8,["disable"])])])],40,re)]),_:1})]),_:1})]),_:1},8,["modelValue"])])])],64)}}};export{fe as default};
